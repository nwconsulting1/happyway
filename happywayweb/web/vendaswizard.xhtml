<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>

        <title>Vendas</title>

        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" type="text/css" href="resources/bootstrap/css/bootstrap.css"/>
        <link rel="stylesheet" type="text/css" href="resources/css/cssdefault.css"/>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

        <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.js" />
        <!--<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.css" />-->

        <link rel="stylesheet" type="text/css" href="resources/bootstrap/css/dataTables.bootstrap.css"/>
        <!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" />-->
        <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js" />
        
        <script src="resources/bootstrap/js/bootstrap.js" type="text/javascript" />
        <script src="resources/js/vendas.js"></script>
        <script src="resources/js/produtos.js"></script>

    </h:head>
    <h:body>


        <nav class="navbar navbar-inverse">
            <div class="container">
                <p class="navbar-text"><img src="resources/images/logo-head.png" style="margin: auto;" /></p>

                <ul class="nav navbar-nav">
                    <li><a href="home.xhtml">Home <span class="sr-only">(current)</span></a></li>
                    <li><a href="produtos.xhtml">Produtos</a></li>
                    <li><a href="clientes.xhtml">Clientes</a></li>
                    <li ><a href="vendas.xhtml">Vendas</a></li>
                    <li class="active"><a href="vendaswizard.xhtml">Nova Venda</a></li>
                </ul>

                <a href="index.xhtml"><button type="button" class="btn btn-default navbar-btn">Log Out</button></a>
            </div>
        </nav>


        <div id="content" class="container">

            <br/>

            <h4>NOVA VENDA 
            </h4>
            <hr/>
            <!--<h:form id="vendasinput" class="form-horizontal">-->

            <!-- INÍCIO E ESCOLHA DE CLIENTE -->
            <div id="welcome">
                <center>
                    <h3>Olá! Seja bem-vindo(a) ao fluxo inteligente de vendas!</h3>
                    <p>Aqui você pode criar uma nova venda seguindo poucos passos. :)</p>


                    <br/>
                    <p>Escolha o tipo de cliente que deseja realizar a venda:</p>
                    
                    
                    <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">Pessoa Física</button>
                    <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">Pessoa Jurídica</button>

                </center>
            </div>
            
            <!-- ESCOLHA DE PRODUTOS -->
            <div id="chooseProducts">
                <center>
                    <br/>
                    <p>Confirme as informações do cliente e selecione os produtos...</p>

                    
                    <h:outputLabel value="Cliente: #{vendasBean.venda.pf.nome}" id="outputClientName" />
                    
                    <h4>PRODUTOS 
                        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">Incluir Produto</button>
                    </h4>

                    <h:form>
                        <h:dataTable id="vendaDataTable" value="#{vendasBean.produtos}" var="item" class="table table-striped table-hover">
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Codigo"/>
                                </f:facet>
                                <h:outputText value="#{item.codigo}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Nome"/>
                                </f:facet>
                                <h:outputText value="#{item.nome}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Descricao"/>
                                </f:facet>
                                <h:outputText value="#{item.descricao}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Faixa_etaria"/>
                                </f:facet>
                                <h:outputText value="#{item.faixa_etaria}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Valor"/>
                                </f:facet>
                                <h:outputText value="#{item.valor}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Categoria"/>
                                </f:facet>
                                <h:outputText value="#{item.categoria}"/>
                            </h:column>
                            <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Ações"/>
                                    </f:facet> 
                                <h:commandLink type="reset" action="#{vendasBean.venda.removeProduto(item)}" title="Excluir">
                                        <span class="glyphicon glyphicon-remove" style="color: red;" />                    
                         .           </h:commandLink>
                            </h:column>
                        </h:dataTable>
                    </h:form>


                   
                </center>
            </div>
            

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h4 class="modal-title">Produtos</h4>
        </div>
        <div class="modal-body">
          
            <div id="tabelaProdutos" class="table-responsive">

                    <f:view>
                        <h:form class="width-90percent">
                            <h:dataTable id="produtoDataTableModal" value="#{produtoBean.produtos}" var="item" class="table table-striped table-hover" cellspacing="2px" cellpadding="2px">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Código"/>
                                    </f:facet>
                                    <h:outputText value="#{item.codigo}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Nome"/>
                                    </f:facet>
                                    <h:outputText value="#{item.nome}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Descrição"/>
                                    </f:facet>
                                    <h:outputText value="#{item.descricao}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Faixa Etária"/>
                                    </f:facet>
                                    <h:outputText value="#{item.faixa_etaria}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Valor"/>
                                    </f:facet>
                                    <h:outputText value="#{item.valor}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Categoria"/>
                                    </f:facet>
                                    <h:outputText value="#{item.categoria}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Ações"/>
                                    </f:facet>
                                    <h:commandLink action="#{vendasBean.venda.adicionaProduto(item)}" title="Incluir">
                                        <span class="glyphicon glyphicon-pencil blue-icon" />
                                    </h:commandLink>
                                </h:column>
                            </h:dataTable>
                        </h:form>
                    </f:view>
                </div>
            
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  

            <!--</h:form>-->

        </div>

        <div id="credits">
            <center><p style="color:gray;font-size:10px;">HappyWay @ 2016 - Desenvolvido por New Wave</p></center>
        </div>


    </h:body>
</html>
